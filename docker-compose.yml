version: '2.1'

services:
  atendimento-microservice:
    build: ./atendimento-microservice
    expose:
      - "3000"
    environment:
      - NODE_ENV=production
    volumes:
       - ./images:/usr/src/app/public/imagens

  cliente-microservice:
    build: ./cliente-microservice
    expose:
      - "3000"
    environment:
      - NODE_ENV=production

  funcionario-microservice:
    build: ./funcionario-microservice
    expose:
      - "3000"
    environment:
      - NODE_ENV=production

  log-microservice:
    build: ./log-microservice
    expose:
      - "3000"
    environment:
      - NODE_ENV=production

  nginx:
    build: ./nginx
    links:
      - atendimento-microservice
      - cliente-microservice
      - funcionario-microservice
      - log-microservice
    ports:
      - "3000:80"
